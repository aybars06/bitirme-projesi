<%- include("partials/_header") %>

   <body>
      <!--header section start -->
      <br>
      <%- include("partials/_menu") %>
         <!-- banner section start -->
         <!-- banner section end -->
         <!-- header section end -->
         <!-- contact section start -->
         <div class="contact_section layout_padding">
            <div class="container">
               <div class="row">
                  <div class="col-lg-6">
                     <div class="contact_main">
                        <p style="display: none; " class="alert alert-danger" id="usernameTaken"></p>
                        <h1 class="contact_taital">Register</h1>
                        <form id="signupForm" action="/signup" method="POST">
                           <div class="form-group">
                              <input type="text" class="email-bt" placeholder="Name" name="name">
                           </div>
                           <div class="col-md-12">
                              <div style="display: none;" class="alert alert-danger" id="name"></div>
                           </div>
                           <div class="form-group">
                              <input type="text" class="email-bt" placeholder="Username" name="username">
                           </div>
                           <div class="col-md-12">
                              <div style="display: none;" class="alert alert-danger" id="username"></div>
                           </div>
                           <div class="form-group">
                              <input type="password" class="email-bt" placeholder="Password" name="password">
                           </div>
                           <div class="col-md-12">
                              <div style="display: none;" class="alert alert-danger" id="password"></div>
                           </div>
                           <div class="col-md-12">
                              <button class="send_btn"> KayÄ±t Ol</button>>
                           </div>
                        </form>
                     </div>
                  </div>
                  <div class="col-lg-6">
                     <div class="testimonial_taital_main">
                        <div id="my_slider" class="carousel slide" data-ride="carousel">
                           <div class="carousel-inner">
                              <div class="carousel-item active">
                                 <h1 class="testimonial_taital">Testimonial</h1>
                                 <div class="testimonial_left">
                                    <div class="client_img"><img src="/images/client-img.png"></div>
                                 </div>
                                 <div class="testimonial_right">
                                    <h1 class="jack_text">Hindona</h1>
                                    <p class="dummy_text">Businessman</p>
                                 </div>
                                 <p class="lorem_text">That it has a more-or-less normal distribution of letters, as
                                    opposed to using 'Content here, content here', making it look like readable English.
                                    Many desktop publishing packages and web page editors nowthat it has a more-or-less
                                    normal distribution of letters, as opposed to using 'Content here, content here',
                                    making it look like readable English. Many desktop publishing packages and web page
                                    editors nowthat it has a more-or-less normal distribution of letters, as opposed to
                                    using 'Content here, content here', making it look like readable English. Many
                                    desktop publishing packages and web page editors now</p>
                              </div>
                              <div class="carousel-item">
                                 <h1 class="testimonial_taital">Testimonial</h1>
                                 <div class="testimonial_left">
                                    <div class="client_img"><img src="/images/client-img.png"></div>
                                 </div>
                                 <div class="testimonial_right">
                                    <h1 class="jack_text">Hindona</h1>
                                    <p class="dummy_text">Businessman</p>
                                 </div>
                                 <p class="lorem_text">That it has a more-or-less normal distribution of letters, as
                                    opposed to using 'Content here, content here', making it look like readable English.
                                    Many desktop publishing packages and web page editors nowthat it has a more-or-less
                                    normal distribution of letters, as opposed to using 'Content here, content here',
                                    making it look like readable English. Many desktop publishing packages and web page
                                    editors nowthat it has a more-or-less normal distribution of letters, as opposed to
                                    using 'Content here, content here', making it look like readable English. Many
                                    desktop publishing packages and web page editors now</p>
                              </div>
                              <div class="carousel-item">
                                 <h1 class="testimonial_taital">Testimonial</h1>
                                 <div class="testimonial_left">
                                    <div class="client_img"><img src="/images/client-img.png"></div>
                                 </div>
                                 <div class="testimonial_right">
                                    <h1 class="jack_text">Hindona</h1>
                                    <p class="dummy_text">Businessman</p>
                                 </div>
                                 <p class="lorem_text">That it has a more-or-less normal distribution of letters, as
                                    opposed to using 'Content here, content here', making it look like readable English.
                                    Many desktop publishing packages and web page editors nowthat it has a more-or-less
                                    normal distribution of letters, as opposed to using 'Content here, content here',
                                    making it look like readable English. Many desktop publishing packages and web page
                                    editors nowthat it has a more-or-less normal distribution of letters, as opposed to
                                    using 'Content here, content here', making it look like readable English. Many
                                    desktop publishing packages and web page editors now</p>
                              </div>
                           </div>
                           <a class="carousel-control-prev" href="#my_slider" role="button" data-slide="prev">
                              <i class="fa fa-angle-left"></i>
                           </a>
                           <a class="carousel-control-next" href="#my_slider" role="button" data-slide="next">
                              <i class="fa fa-angle-right"></i>
                           </a>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- contact section end -->
         <!-- footer section start -->
         <%- include("partials/_footer") %>
            <!-- footer section end -->
            <!-- copyright section start -->
            <%- include("partials/_copyright") %>
               <!-- copyright section end -->
               <!-- Javascript files-->
               <script src="js/jquery.min.js"></script>
               <script src="js/popper.min.js"></script>
               <script src="js/bootstrap.bundle.min.js"></script>
               <script src="js/jquery-3.0.0.min.js"></script>
               <script src="js/plugin.js"></script>
               <!-- sidebar -->
               <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
               <script src="js/custom.js"></script>
               <!-- javascript -->
               <script src="js/owl.carousel.js"></script>
               <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
               <script>
                  $(document).ready(function () {
                     $(".fancybox").fancybox({
                        openEffect: "none",
                        closeEffect: "none"
                     });

                     $(".zoom").hover(function () {

                        $(this).addClass('transition');
                     }, function () {

                        $(this).removeClass('transition');
                     });
                  });
               </script>
               <script>
                  function openNav() {
                     document.getElementById("myNav").style.width = "100%";
                  }
                  function closeNav() {
                     document.getElementById("myNav").style.width = "0%";
                  }
               </script>
               <script>
                  const form = document.querySelector('#signupForm')
                  const nameError = document.querySelector('#name')
                  const usernameError = document.querySelector('#username')
                  const passwordError = document.querySelector('#password')
const usernameTaken = document.querySelector("#usernameTaken")
                  form.addEventListener("submit", async (e) => {
                     e.preventDefault();
usernameTaken.textContent = ""
                     nameError.textContent = "";
                     passwordError.textContent = "";
                     usernameError.textContent = "";
                     nameError.style.display = "none"
                     usernameError.style.display = "none"
                     passwordError.style.display = "none"
usernameTaken.style.display = "none"
                     const name = form.name.value
                     const username = form.username.value
                     const password = form.password.value
                     try {
                        const res = await fetch('/signup', {
                           method: "POST",
                           body: JSON.stringify({ name, username, password }),
                           headers: { "Content-Type": "application/json" }
                        })

                        const data = await res.json();
                        console.log('Data', data);
                        console.log(data.msg);
                        if(data && data.msg){
                   usernameTaken.textContent = data.msg;
                   usernameTaken.style.display = "block";
                        }
                        if (data && data.errors2) {
                           if (data.errors2.name) {
                              nameError.textContent = data.errors2.name;
                              nameError.style.display = "block";
                           }

                           if (data.errors2.username) {
                              usernameError.textContent = data.errors2.username;
                              usernameError.style.display = "block";
                           }

                           if (data.errors2.password) {
                              passwordError.textContent = data.errors2.password;
                              passwordError.style.display = "block";
                           }
                        }
                        if (data.user) {
                           location.assign("/login");
                        }

                     } catch (err) {
                        console.log("ERR::", err)
                     }
                  })
               </script>
   </body>

   </html>